<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>用户信息</title>
    <link rel="stylesheet" type="text/css" href="../../easyui/themes/metro/easyui.css">
    <link rel="stylesheet" type="text/css" href="../../easyui/themes/mobile.css">
    <link rel="stylesheet" type="text/css" href="../../easyui/themes/icon.css">
    <script type="text/javascript" src="../../easyui/jquery.min.js"></script>
    <script type="text/javascript" src="../../easyui/jquery.easyui.min.js"></script>
    <script type="text/javascript" src="../../easyui/jquery.easyui.mobile.js"></script>
</head>
<body>

<!--<div id="toolbar">-->
    <!--<a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-add" plain="true" onclick="newUser()">添加</a>-->
    <!--<a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-edit" plain="true" onclick="editUser()">编辑</a>-->
    <!--<a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-remove" plain="true" onclick="destroyUser()">删除</a>-->
<!--</div>-->
<div align="center">
<h1>用户信息</h1>
</div>
<div style="margin-bottom:10px">
    <select label="用户状态：" id="userState" class="easyui-combobox" name="state" style="width:160px" panelHeight="100">

        <option value="0">全部</option>
        <option value="1">未冻结</option>
        <option value="2">冻结</option>
    </select>
    <input class="easyui-textbox" label="用户名:" prompt="用户名:" id="userName" name="userName" prompt="Name" style="width:200px">
    <a  href="#" class="easyui-linkbutton" data-options="iconCls:'icon-search'" id="bt1">查询</a>
</div>
<table id="tt" class="easyui-datagrid"
       url="/freezePage"
       iconCls="icon-save"
       rownumbers="true" pagination="true"  singleSelect="false">
    <thead>
    <tr>
        <th field="ck" checkbox="true"></th>
        <th field="userName" width="15%">用户名</th>
        <th field="password" width="15%" align="right">密码</th>
        <th field="trueName" width="15%" align="right">真实姓名</th>
        <th field="sex" width="15%" align="right">性别</th>
        <th field="telphone" width="15%" align="right">电话</th>
        <th field="userState" width="15%" align="right">用户状态</th>

    </tr>
    </thead>
</table>
<p/>

            <a style="margin-left: 20%" href="#" class="easyui-linkbutton" onclick="confirm1();">冻结</a>
<script>

    function confirm1(){
        var selectrow = $("#tt").datagrid("getSelections");//获取的是数组，多行数据
        var idArry = [];
        $(selectrow).each(function () {
            idArry.push(this.userName);
        })
        if(idArry.length==0){
            $.messager.alert('警告窗口', '请选择行！', 'info');
            return ;
        }
        $.messager.confirm('My Title', '是否确定冻结?', function(r){
            if (r){
                var jsonStr = JSON.stringify(idArry);
                $.post("/freezeUser",{"jsonStr":jsonStr},function () {

                })

            }
        });
    }
    $("#bt1").click(function () {
        $('#tt').datagrid('load',{
            userState: $("#userState option:selected").val(),
            userName : $("#userName").val()
        });
    })

</script>
</body>
</html>